import{E,az as b,b as a,j as s,S as x,D as v,I,w as R,z as F,a1 as k,a9 as B,J as D,W as T}from"./index-7d6b082f.js";import{u as z}from"./use-router-84d17702.js";import{p as L}from"./index-ddd09c05.js";import{T as p}from"./TextField-ea6f8527.js";import{L as N}from"./LoadingButton-6dc0c710.js";import{C as O}from"./Select-11158271.js";import"./isMuiElement-117ba8a0.js";import"./useControlled-24d38419.js";const{setError:W}=B.actions,{setSnackBarContent:A}=D.actions;function K(){var m,u,w,f;const h=z(),c=E(),l=b(e=>{var t;return(t=e.login)==null?void 0:t.userDetails}),[r,n]=a.useState(null),[o,P]=a.useState("Perfectors@123"),[i,g]=a.useState(!1),[d,j]=a.useState("Perfectors@123"),S=()=>{if(o!==d){const e={isError:!0,message:"Passwords do not match"};n(t=>({...t,confirmPassword:e}))}if(!o){const e={isError:!0,message:"Kindly enter New Password"};n(t=>({...t,newPassword:e}))}if(!d){const e={isError:!0,message:"Kindly enter Confirm Password"};n(t=>({...t,confirmPassword:e}))}return!r},y=async()=>{if(S()){const e=await L({username:l.username,oldPassword:l.password,password:o});e.status===200?(c(A({message:"Password reset successfully",toShow:!0})),h.push("/login")):c(W(e))}},C=s.jsxs(s.Fragment,{children:[s.jsxs(x,{spacing:3,sx:{my:3},children:[s.jsx(p,{error:(m=r==null?void 0:r.newPassword)==null?void 0:m.isError,helperText:(u=r==null?void 0:r.newPassword)==null?void 0:u.message,name:"newPassword",label:"New Passoword",value:o,onChange:e=>P(e.target.value)}),s.jsx(p,{error:(w=r==null?void 0:r.confirmPassword)==null?void 0:w.isError,helperText:(f=r==null?void 0:r.confirmPassword)==null?void 0:f.message,name:"confirmPassword",label:"Confirm Password",type:i?"text":"password",value:d,onChange:e=>j(e.target.value),InputProps:{endAdornment:s.jsx(v,{position:"end",children:s.jsx(I,{onClick:()=>g(!i),edge:"end",children:s.jsx(R,{icon:i?"eva:eye-fill":"eva:eye-off-fill"})})})}})]}),s.jsx(N,{fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"inherit",onClick:y,children:"Submit"})]});return s.jsxs(F,{sx:{height:1},children:[s.jsx(k,{sx:{position:"fixed",top:{xs:16,md:24},left:{xs:16,md:24}}}),s.jsx(x,{alignItems:"center",justifyContent:"center",sx:{height:1},children:s.jsx(O,{sx:{p:5,width:1,maxWidth:420},children:C})})]})}function X(){return s.jsxs(s.Fragment,{children:[s.jsx(T,{children:s.jsx("title",{children:" Reset Password "})}),s.jsx(K,{})]})}export{X as default};
